\documentclass{article}
\RequirePackage[T1]{fontenc}
\RequirePackage[utf8]{inputenc}
\RequirePackage{starray}
%\RequirePackage{lt3rawobjects}
%\RequirePackage{l3keys}
\ExplSyntaxOn

%\msg_redirect_module:nnn { starray / syntax } { warning } { error }

\NewDocumentCommand{\test}{m}
    {
        \starray_new:n {#1}
        \starray_add_prop:nnn {#1}{X}{X-default}
        \starray_add_prop:nnn {#1}{Y}{Y-default}

                  \starray_add_struct:nn {#1}{SS}
                  \starray_add_prop:nnn {#1.SS}{Z}{Z-default}
                  \starray_add_prop:nnn {#1.SS}{Zx}{Zx-default}
                  \starray_add_struct:nn {#1}{TT}
                  \starray_add_prop:nnn {#1.TT}{Z}{TT-Z-default}
                  \starray_add_prop:nnn {#1.TT}{Zx}{TT-Zx-default}
                  \starray_add_struct:nn {#1.TT}{ZX}
                  \starray_add_prop:nnn {#1.TT.ZX}{ZXa}{TT-ZXa-default}
                  \starray_add_prop:nnn {#1.TT.ZX}{Zxb}{TT-ZXb-default}

                  \starray_add_term:n {#1}
                  \starray_add_term:n {#1}
                  \starray_add_term:n {#1[1].SS}
           %       \starray_add_prop:nnn {#1.SS}{YY}{YY-default}
                  \starray_add_term:n {#1.SS}
                  \starray_add_term:n {#1[1].SS}

                  \starray_add_term:n {#1.TT}
                  \starray_add_term:n {#1.TT}
                  \starray_add_term:n {#1.TT.ZX}
                  \starray_add_term:n {#1.TT.ZX}
                  \par XXX \par
        \starray_new:n {#1}
                  \starray_add_prop:nnn {#1x.TT}{Z}{TT-Z-default}
        YYY \par
                  \starray_add_term:n {#1[5].Tx}
ZZZ


            \__starray_get_prop:nn {so[1].SS[1]}{Z}\par
%     \group_begin:
            \__starray_set_prop:nnn {so[1].SS[1]}{Z}{newZ}
%      \group_end:

            \__starray_get_prop:nn {so[1].SS[1]}{Z}

           \__starray_get_prop:nn {so.SS}{Z}

            \starray_set_iter:nn {so}{1}

           \__starray_get_prop:nn {so.SS}{Z}

            \starray_set_iter:nn {so}{2}

           \__starray_get_prop:nn {so.SS}{Z}

%            \__starray_set_iter:nn {so.SS}{1}
%            \__starray_get_prop:nn {so.SS}{Z}

%          \__starray_get_prop:nn {#1[1]}{X}


                  \prop_show:c {l__starray_#1_prop}
%                  \prop_show:c {l__starray_#1_def_prop}
                  \prop_show:c {l__starray_#1.SS_prop}
%                  \prop_show:c {l__starray_#1.SS_def_prop}

                  \prop_show:c {l__starray_#1_base_prop}
          %        \seq_show:c  {l__starray_so_seq}
          %        \prop_show:c {l__starray_so_hash_prop}
                  \prop_show:c {l__starray_#1_A_prop}

                  \prop_show:c {l__starray_#1_A.SS_base_prop}
          %        \seq_show:c  {l__starray_so_A.SS_seq}
          %        \prop_show:c {l__starray_so_A.SS_hash_prop}
          %
                  \prop_show:c {l__starray_#1_A.SS_A_prop}
                  \prop_show:c {l__starray_#1_A.SS_B_prop}
          %
                  \prop_show:c {l__starray_#1_B_prop}
                  \prop_show:c {l__starray_#1_B.SS_base_prop}
          %        \seq_show:c  {l__starray_so_B.SS_seq}
          %        \prop_show:c {l__starray_so_B.SS_hash_prop}
                  \prop_show:c {l__starray_#1_B.SS_A_prop}
          %        \prop_show:c {l__starray_so_B.SS_hash_prop}

          %        \seq_show:c   {l__starray_so_def_st_seq}
          %        \seq_show:c   {l__starray_so.SS_def_st_seq}

           %       \seq_show:c {l__starray_so_A_seq}
           %       \seq_show:c {l__starray_so_A.SS_seq}

    }


\ExplSyntaxOff

\begin{document}

\test{so}


\end{document}
